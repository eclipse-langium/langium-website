---
title: "Langium + Monaco"
weight: 6
draft: true
---

And this guy will be talking about running Langum in the web with the Monaco editor. If you see Esco before you're probably quite familiar with Monica as it is the underline editor there powers does code. We should also state that just because we are using this code, monaco, in this guide does not mean that you cannot use another coat editor of your choice. For example, you can easily use code mirror or some other editor. If an editor has LSP support, it is very likely you can integrated quite easily with Lancome does LSP compatible. So without further do let's jump into setting up your language in Langham another the knuckle purely in the web.

To start you're gonna wanna have a language written in Lincoln if you don't have one. If you don't have one you can pull one down for one of our repos such as Langan locks or Langham many logo. For this example will be talking about Lancome you log on but it is a relevant which language you choose so long as you have one's work with. If you want to write one yourself can always use the human generator for me getting started in their documentation section, which will set up the bare-bones hello world language, you can customize to be your favorite on language. That's how mini logo started as well.

Once you have a language picked, you gonna want it in a great Monaco. For example here, we're going to use the the Monaco editor workers and Monaco editor rapper packages from npm. The Monica editor workers package is a support package for Manako. It allows supplying all the knuckle editor workers as modules are classic workers and with some handy utility function to be able to work with the components in Monaco. Monica editor rapper on the other hand frozen convenient way for wrapping a Monica editor with fooling with support and in his support for workers. This includes connecting with the language server via JSON-RPC.

https://www.npmjs.com/package/monaco-editor-wrapper
https://www.npmjs.com/package/monaco-editor-workers

Both these packages can be added into your dependencies for your project for language. And dish and it's also quite helpful to add Xpress as a dependency will be using it to make it easy way to serve our page containing Langium and Monaco. What also want to add a package Jasonville target that allows us to copy over the minako editor rapper in Minocqua editor workers contents into a library that will be using to reference on a static page as well. Add in the soonest part of our bill process makes a quote easy to update Monaco and update our page as well at the same time. Again, choosing another editor you would want to make sure that the assets required for that an are also copied into your stomach folder. What are you doing this we can proceed to actually implementing the static page itself that when I called like it will be on.

 And now for the actual page itself what are the things if you wanna get started with is making sure that there's a little bit of HTML set up to support our editor. In this case will be setting up just a single paying for Monaco just to make sure things work. Simple sentence can give this with a little bit of styling like so.

Add HTML/TSS example here.

And then the actual logic for configuring Monaco is going to follow. So we can team with an a script tag of type module that will import the Minako editor language client rapper from the Minako at the rapper, and will also get a Billerica definition for Minako editor workers and ask. From this we can  build a worker definitions and actually initialize the language client or the Minocqua editor language play rapper. This includes setting styles setting the font giving an ID setting language ID, etc..

One of the more important aspects of configuring your Minako there is actually giving the syntax highlighting, which is  declared statically in this case. The grammar for providing syntax highlighting in Monaco Monarch. Conveniently, Langum automatically generates a simplified monarch grammar for your language provided you have configured it to do so. By the fault Langum only generates a text message grammar, which is used to support send text highlighting envious coat.

In order to telling him to generate a monarch grammar file, Will need to update the Langham config Duchess on file at the route of our project. If you're using the human generator example, this has been already constructed by default for you. Under languages you can see where your language to find the ID and grammar in the file extensions you'll also notice to text me section with a given output tight. Order to generate a monarch grammar file I have to do is add the monarchy, and a simple object with one property of out, and make this hell world that monitor.es file. Then, the next time you run MPM run Langham generate you will not only constructed text Mike grammar file, but you also construct a monarch grammar file.

Even then copy the contents of this monarch grammar file into your monarch tokens provider in the editor config for Monarch for Monica. This makes it easy in case you wanna change something directly in the language representation. In case you're curious, the monarch grammar grammar language is a simple stack paste purser. So under the tokenize her property, everything with the name is simply corresponding to a state and all of the following elements are actions that can change states or recognize tokens, or both. The documentation for Monarch is a little bit vague, but with this in mind it's much easier to piece together how it's working.

At this point within wanna make sure we set the main code for editor which can be literal text or provided from some other JavaScript file. And we also want to set the theme in this case you can choose one of the default teams, will go with VS dark.

We can also use the editor config to indicate that we are going to be using a language client. We also went to indicate that we are not using the web socket, as we're going to be referencing the language client directly instead of using a connection.

Towards the end of our configuration Will also want to set up a language server worker in the classic style. This is dependent on the URL of your worker, so make sure that those files were they should be. Within set the worker on the client, and start the editor from the client. How to start the editor, we want to make sure that we have an element we want the editor to live with them, so if you haven't figured that before in your HTML make sure to do so now. Ours is called Minako editor route, but you may choose whatever they make sense for your case.

Then as a small touch, Will also add an event listener to respond to resize events on the window and allow the client updated size. This is not necessary, however it's nice to have especially if you plan on squeezing the windows around for testing and keeps everything nice and responsive.

This point we Have our front and set up for application to work. We have Monaco ready to use we had a bill target for it to copy over the library files as needed. However, we're still missing something very important. We still need to be producing a bundle version of Langham to also make referenceable for Monaco. Otherwise won't have access to our language server. If you've been following along with her guides, the last one was talking about call bundling, which is exactly what we're going to be doing here again.

In order to bundle Lincoln for the web we can add a simple target description or package Jason to build the web worker. For this case we're gonna be using ES built so make sure that you have it installed is Deb dependency. Our version is 0.14.47 but yours may vary. Then you can add the following command to be able to produce a minified build of your language server bundled and ready for reference as a worker.

```bash
esbuild --minify ./out/language-server/main-browser.js --bundle --format=iife --outfile=./out/libs/minilogo-server-worker.js
```

 you may have noticed that this point that I am referencing the main browser dodges file from my language implementation. If you're following along with the hell world example you won't have this instead under language server you'll have a main.js. Either way this is OK, that's just another entry point for your language period for a mini logo it makes sense to create to entry points in addition to the regular mean, also added this main browser.es to provide a secondary entry point to the language server without using the note file system and keeping things more flexible for the web.

In your case you may choose to eat in modify your existing mean.es, again located under source language server slash mean.es. Or if you believe you wanna retain this to be able to construct a local version of your language, you can add a main-browser.es as well like I have. Again, the main difference between the two is that the main browser will be using the empty file system since we're not hooking him with any virtual file system yet on the browser. Will also be adding a message reader and writer that are browser specific to support the language server in the browser. If you member from before this particular Porten, as we are not using web sockets so we need some other mechanism by which to communicate to and from our language server, and our language client.

Now he's in the command above, be able to build your browser specific bundle of her application important using the program script that we were above for a static page and we are nearly ready to be able to view the page.

In order to make it a little easier for us to view the page correctly, will set up a demonstration of Xpress application to serve our static assets for us. We can have this listen on portrait thousand and return just static assets from a folder. For convenience, let's just called his folder static, and will just be fetching details that are generated from this folder. To be able to access the six press application wanna add one more script to the scripts in her package Jason, Will call this one serve. And this will just invoke node on the xpress application file. 

At this point you should be able to open your browser important local host: 3000, and you should be able to see an instance of Monaco running in the browser with your code in the editor. How do you make changes to your Cody should be able to see that the syntax highlighting is not only present, but that you're actually being able to use the language server protocol to do things like renaming symbols, taking code actions, and also observing errors in the syntax of your program. If not, carefully double check that the proper resources are loaded into your browser, you can use the inspector for the census is quite helpful. And just make sure that everything is present and not missing, it's not uncommon to have a one file slightly misspelled and so you could always go back and double check to make sure everything is where it should be.

And that's it, we have successfully implemented minako in Lincoln in the browser. It's not doing much at this time, but in the next guide we'll talk about using the same set up to hook in generation in the browser as well. By doing generation in the browser, we can lower self to have some sort of affect such as a graphic to draw. In the case of mini logo Will be able to show drawing instructions on an HTML five canvas, that corresponds directly with the program that you have written in Monaco.